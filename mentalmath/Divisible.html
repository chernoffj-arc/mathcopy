<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"26ab0517b447a51c62629da6659da721c1fd7ffd1792d258fef5f59292d40e76af15501cbdef78dcc91e996bcff274798840bdd1d47ec342f7f40387da30f257f796699ff9c6a17baa0e5c7b030421b9f617e671627a793070006b99a96d107df9d29c7d0885142c051dc7742bfda298a83ab63a7688f824e2570d0a7713f1e566c93b61caea335481f5b1539c00591c984adc9a4f579e61efd925327ac5c57129dc041004e70e91853ac5a3ea1258ace89bf1a5fac307c0e2048ff0fdfc5c49253a075f3b7ece2a4e77f1a348727f5a37034acc4f1093e25a509d49d8ae53092082eece84abac886a5753647dce6c10265a91cb0cdf1281e8412916780a3c402ec0b53fd907a4f008098dcafa007f6f418d6a89cf9e6059fc8225a28fcddfb2e6a40af4c20e062738572d1b679e323f6184d3874e407c2caf41887ca4269e9d766f6268423c098d5975c297bde4269bd9347fa8e9ac09cb2ad6d94a67bfcc175d20ac7e1e1eb562096fb87b46fe66d0ab63b854ae1d0cd1643737dc6b3c223a13007e8e8795d6120190d9e1f00e1d521f09275d564b00880dd585a3453c3354310137ba900b5e17458417e3f43045d26e4661236eb13a8d400459846aeedaa2cc9fcb01faf2e89c616ffe9d4517854e31e18604f0d2ac16a640af7a6b178b91edc3cc907330c65b27400b26a4d15f8d5e621a1d978a0f482f9a9df787c4825c8002e883550e1b49b2eb55c9aa2e8acf3d76a9969572d9df3d389fa267ab7b35666a8bf6a8320499454a1ca92c1afd7ab780c9a686805f0ef617e30831d0b96446404926f6f14739f96077bbe3898dd803c5031d8317807ceae03aea323a94acfd102f5930586203f42b498f1457cef47747ee50cbd3ea9b2c51b4c47552c685ca32053989a485ce9dbda21de3732e6cb4e5e509c83c880f3e22203bc7112b5600745e90365df5cbf762e392f9eaf2a3f56ebb3ee8c97f1657b50795fe3f43babf6ae03092eec73449bda211dd04fe5860a9807dc5042e54c307418a675ad02f4097603a63e08ea8c202356dba0e14aaa03c8913b19c5dcf28a6a424176f02a1ab546d17b198ca4621a83d6912a4fa888a6e204a0d649c0d3f28af0573d8dfeadf648aaa96aba14a785ec746697bac4d70808eb0f1f046ec9a3b11d6b7e34435e1f89fdde9a9c0fb46752c39ced70cf5dab4a54610fd8f9963976a96f4318ee2909bade0943b98a428457ef92b2f37ca856e40c0f42ff56f631d0c72b5155e74d522589ae5b34d0e28547c0534b0830396f45a33ad7b8636139dbf6441736b671a982d7beefe01a8a4a4923babec91608ab13105b81dc38b3ca361bad56490c6869dfd10e15c156a1f01cadc3477009159eee867709902b99c8351f7392d6811f7c8609205b7ca57d8dea24302b31c4c59039b107cd8d06015d9ec12d5b91052eb02e49650087ce9feebdc0a6f275bc53e7e422163d0a9762d64c510d7ff8c135ae2283b9dc06251bea00c61f34910bf5bc22d8e41c59f4f18b6bcb513b25bfa03fa8cfde18165dc841053fe60e448d0a996b4a0295db1d099538f860aa8cc00bd3213f4208ddc990a56362dcd3c6332600a63e4b7989e61ee9ce12fcaf7ed46f2d5877a7e92639ca744f48ba9289d7fe98910460be7534d316b7d882cfef2e697a17b77a6051052d241685041f161d338df236b31c6eca425755cb14205dd16644b1c17e2a805c6bf2c1cc29955249f3997901be0e8e14a3013fbc5fdc15bd11fab27b35817be1af90c1cb099779de07dfacf5da2565a48c34163fd06568d246c11e012e86801018a2f2bb6e0fd45db46ad3f5789dd591ea182ad639c709f9fda9ee5d821cc5ff094b0af8c98beaf6fe6a79f703e257c44fe17b8756fd06944d73916d6e30f9990404765917cc865b93da1e8369af0fcea4f505ff173c36953fd0b1c5a757390f11e48cec30e1c3cef3a8cd0c4a7f9621a6d276e50ad23cf647f7292c5df1894cd6be8270f6548a0ce117d2fbf6de4f6b4891a2208a6fa63c843d345f38e5d0c06e9d07af0af6ba22bf0624b4fe85505931c27c18648d0dff9a7b402b5b8bffa6db2abd282da8536d14aa1c03aef7b4368b8f4ecb8f982862e0309e1e83c48aa825345fb84ef5756b9ff07b851bb44ac944ab7a6879abe42adf7176d8f795015b51a59fe2c6cc3e99daf142f6fd19fda7d00784f7b9828075ec68e0e85f0a4881ceac05d4d4be2491504228153656ed8724e202c19682aea42e277b6889874fa0e8f7c393a113b13a778c5727db59e69a5ef82b89236ac5b99daccf50203fa6f8fba1325f9383dd947ac00d7718b882d594582653d0be1a6df884604e807eef79e081d8142aa6f7de80ea817b02b130dcf2c5a6549e3226f7891bcdde836d11df86ef9fec562cb8a805e66bdf010825b16e4505fbd15dc21b1f074fc8fa33d0078ab00dda375848a3a4d032c897e6b7a67ea6fb64575742ccee8f7e873a771341ed16780fc0408a5d9996bdb25fcc147c4ba7af7f41c9e03c8b916c4c5cc05d3a81908249726059c889ad3cff43c52310ca63bd413d454fcc4b15a0576ded83440bee5497a358f958151206368027c4d8a3a4fbdf461ee804d182268e1b4ed7c8f603f0df9bfcf69a7d2350c0b8feab1bc815e7f28e186bde67a402eb27ec6553197181e2aa7d5861749310a2ff4ba1ba2a2370b69e7f10266214443e1da79b1775307e78352315c6049ebf47a6d15953eddb1fcdda036049a306d9f0f644fcb5fd1bb0eb93b5268c2670e25e081deb008162a18d4db8c789bdcd391a7d2631b51a5c22557f9a3b4805a586208e707c1a9023cb8526744b032a87f3caebd23002166fd3b48304e16d06b3309dd2f34e189dc061d029ef68a9b315dba34e7a25e063de7bb6da423ce3a411ac8dc53934575430f0d691cf47e4b21c01ab1cd15375276adc591781ef2ebbb7a5c1e44d43713ed0213da77119b5e6fd2b8c42c5cb3016f83eb3ab7516460d2c5634dce54eb51bce5aa80716669311a46d689c4771f1156c6a7efa00d77cf889e7be067bb2482ac460000ee3f66086527a18c51f6f9a75d79cc242306ad575217d6461855e30bff1c4a98c60a3b7b689bfeef96e17c7a72bc7f6e04a2c2cc958cb072bdd89ba778f3dac39bc5f5484dc83a3c453478d6a8d6160832d33f88c3032f89509d2b6316fc51c3d35bb6e4d3acf389546170c97ff89c1e71f252813a3a0fa1a25e9aabcf2b71cf386333061a40e753cf291c380efa117d091a60a7a7bf44bd6dd7cbbd470f83f05edbd744e03a52831476419e87a1e24f4c9c1b8f571dabc09c9ab165c5457024c1d77b61015e0caca7e1601fbb1e5f359cdbc0c6e99eeeb0f7eb97968468aea74f76fb68e16fa59999509eb943afc7083e5e0c0c4adceed029a94c0a191710ffded4251b0ad4cbaaba20d5e6f2775603edfc4f654311eccd8e18c74314a70bf52fd9795c031d5b06a8509c516146562c756c1176ff0d8b661c923b283d82206a6e7990cc3855d25177726013cacdaaefff4cdb7266bc728321b1843f33f3337e4243613a8f915c85f170ca5b147670ed1b2bd237b2239309f904356302bef4b877bb01d29ecaa2b9529153438366ab4679ff08b8669d575fa517d3683e3ac6b7a0e1ef5c06bf990e11de6aa13c0ed647b6b1cbcb8165010e00330c1e1fb4504096c78e278bc508c8e3648df990b5d0ba68619f4b61457e18ea294885e9721745cfba7a3f01b918e1a4bb900420bf093f25ef4454b39ef6f7dd9e685860fa8c17890ba0ca19615efc566c4ff96d9d6f47d4bac831fd9ea5808317bbfbdd5c9344bbcca081035e57416a14acb9548aea0b6cfdbdd2346ced5659c4520951999f81b946c930ead6b8ad328ad1d330d1d573744020bdfc1f7fa2d4e4cd461bd03414a79ef3a62cd6b36425cfd507d176520070c204c40a265e48d5e438ea96cb1455c37e8b850c7eaafe6cc6f7d41f84262616bbb557b2873513e0e6046cd090cffebc0e2479a2faf41487beeb04b9c7ab872170c361261802b4076e2f1de937de2a9988f8679ee1a410d66c94cf9cf0577e993359ad74584fd01f4eb591360d70eae703bd068412c0bc9337882bfa918d6d5d28159d6c5a0046ad1bba4c983e9a8d8ca85ffc764a1819b8d46d1d36ba2b37eefe852a7513fc3325fefa1611817b24316add0ef81b39f205e1cecec5e39a824869d6dc26444e3486aafd31a09acfbdbdf27a09270e6b1bfbaa1c476ad88c8b2e2aeaa4bf9c5515d9a2ac9369609dfec05e9acf51c46d4ae634907187431e6370f7887a06d91addf725231e6dd41920eaf05b4c1805a6facf5ab991b80761baf1278b3719e523f2f60107d4246a208efabc079452aacc8f680d8adeca75e7ea3260d5b59889d059066e64abf8d84afc72820e3e13bce38ff9c10694345cdf2ede4105b88e1db416fc5b2cd2ca4572b0174216f2a8ec45f8f3eba75acc22dbb1236d1bda52773a92e2dfabca50ec1de674b90ec081fe0b0309de8a0ea3b92447d4f042483747a776b15f325ebcb8577ff49b202fb7f09ed5b772ad72b7044691d6e7ee4b107b78f59edd1aa79a3a74fc999962be4c91ad53da9e4aa1a119ffcda828e43d055824054cab62170045bc5c2266f6e9873cbbcef282429fbffe70e20250950f2554815b705b59e5a082f5e019e3c884df4349e8fab782e28487720f6901b48f8c36dc9a764819b608343a112a1f4c6251374e70780727453c671afcf2648df68b291a613aa62304d2104e63323bfa35f8338e9e8d0ef2246bcd67061657e31e4c415d40c55a466903883329929113ec0c464f2900a75737e61715466c675634262e416e02877328d26703ac221bbc60ef068d85692be9cc736cb8dc19a413dcb9d70ce8475cdbd0311336722ece0af759fb56a88366ecf9eee95b712a5e3fc6f4425bd1de8ec8787c091848baa0b685082d35ba8775b2b703616636a77870c3894839ea4ef0a43c2b3c297c80874d493908d4d7b70ecc1162ec80fba35eefd62989df1b5493092c01daceabd6c54b00df97c3086becc1b5e00d4377e7423e7d14f4c8c319a207b19645c29195a57f89805df247aa6fc6d9e27286842c60010c5c8bd1f78a2896ddb933f582931b0710125f6c47c34e9d482a5fddbb427c87c617d90a8aadbebb2015715eaaec3a16ec0df1da6c3baa3c4b26ba480875f6a56f23091c73ed22325711a7b800f5a3b1de299c905b6c8a46f235e4601f6a3fc51583f95019a13304ed399be31aa97e34027cd7c53fd99731f414bc62e4e1819740b8d68547d161f637a824f0bf354044b14179f6bef77d5e30d99ebc343ddfc3aa1b8fae3f16b1dab2a31dd1d8cfdb597bf911e7773ec895e2bd22b29be9f632c078bf10eb997e43f0f8b22a9fcb0d9488f6cbf1aa69f26b356d56a588be6ca085652b021df5849ecd3b247e995a24d9e6bd3ad8b4053e3ecd3ed43385e0041e1ff971d58c09444be04dfc54aaaaa33ab45f3ee43b701ac2a593fb0c1c30b1b9b07f5213c9cc10966aef755861d79a1c8a5bd5eb5f5084134c66814810b1876c3bd333e0cdffbda579c5e09dc63b30511e798a43e72693ae0ad1d672da411b97326acda26a7db5c3ca290f973b5e7e79cf9c33330f289788a234a05847a4f1bab5da0cdf86ba162f55a04d6c37623f37f00e5cf070a985d6d7ff387de1c5cae37db4626ac65596480a181b99cdd1948c25e85b126b7b60154392f4039262d11fc2efd26838cb571cdc014f3f603694e8b6a1e88428cd9e1f328d9e2ccd2a5049e4d21f578298cf6df7a3d27e4e2485bae32f9bd376fd9a4af74d95d2f40167b230d38b928c0253ab8caf3c5dd052a970c6742d24b2e1b74841e93285529353e11f4e6888526662ec6f71853a6b68b7cad6599ed71a11faf5eaf3b5b8f5ca6bf83adede1ccdeb11dd4ac4fce1d57868d1b207066cf51619a259c5de54f815b54494f15cdc86b8c4897c5d2097aa40464c42ac1527e1993a4bf9337110d3551c45e8b01a010fae3ec0c092fad7136b97e550ba4cca9d9c506d1f1d0a8fe4a5f56aa85140b8573e0ff9493d9b958b0faf3f13e653f0fe9079177a42a3bab8f711b4835226cd27e50997d21f5bd6ef867859bb9e4dc9fb851e0d80380f98db924b8f436c33a4312ef1b4dd063bca8885f00eabe63f6e1a8867ede881109afccfdd79e5281668d286d9f6f39c8e1b503d67808c45c58f6592ec6410a23e13935d32f31a960b2f388ed1ca94b74d6253a500de565fbe5f3c160f26f76673345b6d3abcaa782d4c98dfb8fac751a31bfe9fc599bdcf6541f42e89c724fdac4edb46ca3988df27ac8f8b809b19b17bdc7e04c1ee9690ff9ccaa63460ea7fed28b1dc568ce400d76578b40f85738182c9b4ae3ed79526234ecdb3c147dc1acb0fb5f7ef4d48a50728832e81c6a49263990200b9ea769ad95adc800e578dcc0c016138537219eac53be78e435e314db39793b1ead6b7331d95377aa050e02743a16e2b96ee09e103e250f0101cfa49eaf4026701469b39ca38296ca6e20d063ef5f2706f48789248b49ea6e0d356843264694c1275ec4f470a71af4e95900d3290e57ac5a1ccb74f6cae8a76d7fcdde391c6f8fbbb9a480c31f14371a5520e212febda96845e3e771d3e4dc1034420df8ebb6b57bac2ab68ad56539c498d28e4da1767f2e9bc309ddfc900d414bb12399cdb9ecc7b9628bd38e8e12654fd9bf0588a37f5ec5d350a99a77e8bf9f0fbf2ccb95040f44f3856e3164e51362d747fd58b8e1ba6b4d99eca7c4d22d54dbf3c2f14d08e45fe5b2e3bb470ed4bb1b3b4d209fe9fcaa42fc2f34cf84f483b9731d2abea062e8635b650efcf7ef2fbfba15c0854f8d1de646c3c515487c8c9f4dc07ef5b5ec0dc3c3c2a1a47f64035e0baffeeda5ba470a48c7ec2a2e1f4698e0ed0499eb9245aac9c1bfa10f6b0033a3bde5b47d9654f308087585e48b5951c1abaa0af1bedf1616998f807d59fc4ddc811959a65261b0db5aa5ea7129a033a46a34d27ec07f1fb2f35d3fb5e7ad2b05e9dad3ea5bc5219b7dd1e30421c278589952a47585087c022085cfcd4bbd02499cfebc884486f93832ab54d51a23cbd423fef0eb75445b72fc1a3fbec13ff4d018e942f7ffa9748149bbeac4c3ce3c024a8aba93156dfedd9e2699c7b4cfd9a8b267d94a6ea712ee70dad47df55006a4d5b5b2708f33b9c4d2d0b13c706dc364de9af787acad4a4432c4ae39aa29e1d2568a91f53884c72a7caeab61fb1c1cca13cecfff2e2a3bbb71b3b63a2417f748b7125b8cd6ac7260bfbe8543984ba214ee619ca2b5b357db51365dae10643be67872f447e3b9895042afb372bb8f490bea0981b80ddb977f5f00ed6af83413c2eb868bcc41b865f87b4c06d5c72bd28a03773103f9c061683f3b63bc8f0b41a95fcca59c99ba99ba3e458ff554267056bade7cbc399c543fec5c8d066796dd051b73de22a14b1e2f1deb8c8ef3f004e7ac1e572acdb6209bd69b82d69aa56e9755efdf1eaa29c000dc2b6f2f6c2ce346acb8bed16f66e7c2785316c09506e3b54e05a2d6d7cbe32ad3162e214c5f5c4fe5ab1a2e5bd168c1a164da6a6e210ac1d88cafc100288feec99b013eb43221f9a4677d3138c8ab3d21d472c23905a596b97945643076029aa3b1fa10b27c954588ad11b98c584f641deed218d7ed11aa6da2e0f389b5425c0f020e8d133b6bb891f6f7a13fd6ff19c134bd0f5695d9ac3f3777a42c7d41bfe0e1d3531c1379221bb8f4d1e8ea1f195b5e0ab401b68771546c1032268fa816a7021f7afb27946f98b603e560d0f3c8555279d9787f597032715ea1f2ddc84d616d764fdcce4455a3401129a648372bd65f2c118e9f915f19cf54819cb6a3ffd2936ef9b207c139387fb1375a0cc26aa108fb3e4d7d3226409fc231adcd1990e56cf5ce61997a22c53e42ed7dcd1729005fa99feb6e0df3bcc13c6252082cc9d19a27573d05614391581d7b3593fa450fe074df393bbd9ee4ab58f6dadc5a4adc29f15fc4c0971b18e8b6772e747bd89cab45e51a8b904bfb0993b180bcd101e61c940abc2eac410f217d7994ba6014b03b228e00a28afe95f3966d108e7bfcd566989603f59f36366fbb7c5ab4ecbaeb95cce6f9906b0912b433156ee3ee0c08cd61773ce25cd2bc66768c8913b9bbbb127a7619908e408a7e850a33e5d8bddeb91dd7acee134d8e49ea826dc4f8d2481263bf07e9d3e488851a843f2b1e4dc1793a7b985db895a33f216150771f641cf5b7ae4cf98353b486a3761c6093abd009a322521898b777a76f0bc2fc335f9a91d0332168aadbaad346e85ea5bc6a1d30fce1a86f154e1a9a5da5d591c75c192a9ed140f0f98a08deee5a10b16c87021151e6c8564986f1dec864958aab8a2a03d5d2d0dba6bcb40143c2e0f0a59899b1dcb531de14f6c35cc87bd85e60050f71178186d5ea90713d33bab482a16a088fcb00cb8e3a8a92a9f646170f184afdece5da24db602a7694a17810677146154ad9a49608d85007b500de3b470d599ad959c162f87c4869b2d81bbcadfcd853639bb0f1c3bc25c6b5c805c89f3dd1e5ad84314a9dd5af380dec2d8fd3fb1df073c9e3720146829b8477193fc6f35be83e0854ce86d966a0fa23bd5dbcedc7fba0da10d36cab74d6693103ec3f4ae79cb71fec0f57258cc2fea7f21183d9314d3274eb48530d0ca37ec78230b45d753dfde9f6877b6d421af474e505636615a15a8ec13a5f244acef2c4b0ad0e5d0039c07432e3bd64c5351c1dd8075138e47d8b1d572b8b559467b352754d2ffe6026f84075485748799e119f2ad4b9a147efcbfa4faae7d9178253f21f22b61b0a236531772e0e33fb2036d9e7f95ac100c968c89f1996370aabf6b0c8e426c407d2be5d52aee99733479d2153a53c46e69e2d6d127f8edc2cd303f2b2df2b2f9a44fda61a1ea0aadb799575c7bb0ab448053658f399e2b6c8f6aad035fac2e79d4eadfdb2497a48db21dab9549d1fc125f6c1efebadfbdcb9404d2d9fcafd9a2826f9d4470806f26d5e8fdf51aa8b3509cb9b5a1d95934cfd89048e1e47176b639cd92fc6f998e1cce7ec4387086b98c2010bac98b2d4ab677517fa28af7d1056b527545293abd5da94131860efc596a75d9af9595e62c0538c82546ede0ba0fb09c8b2a0bec21f91e0b7e3db0bfceb8faa2296bc739e766b376fca632133285d4234e19c856bf46571976a9007ccf869ef6bafc7a729ad099a95f0025efe155216203e99a3163582aab708f8be500038ab7adc038fb9e60b04e7e0e974b125c5fb2daf6346f9f833103f93957737b8a24761f07f783433d00203207d44f65fbfc36670cbab50b7dbeb9e5b5bdc14f7f83eb289d1468681f6bf7d8cb76000f8e3b56411e639206a76708f509fab231468fe7aa0132b8cb4715ec2c6c9954ac8af9a05809911cebd989ba1f39c64f0fbb91924ba2bd4e2363b8bfd298529579edc32422c6800ef83579365ac1b9de6f6272bad884532b86704905538432c56fb33425f07987634a3ad11b7ef464aa0876e8ea574c3e461bdab998ee9d346764eda87f35a05f5be98f922c657e6442ba31840bdebdabf3df978794a13b6e234cb3b772cedc2127c4dbbcf2cbe67906c2cd646cab4666b2467a231a49dad7f901c462958fa96696813c1a0d06df49e54eeb0bdc63444177d3f9d11a0bf89afb49b6e61303009b180afc386663524edeaa02ec2d07ea288234761b2d29d5eb5ffb296cc11775579063286305494c04717f79046193fffd071c96bbd631a1de33859fc219ea085a641a1eb2d40ce004512d13f05d5b34637fc9e90a5d0ec4c16598bb6d5182a91abf7171823c9b362c908e48050ae11db153b823df2d0c0bc886ea02a196993c383c7635af6f39c8c1962bc4d08335fe315bcd05279c9e062a8834cf77057c21c767b7d6aaee023b64974a178afda0cbd557db97529db2b78000cbe6bc7daeae0686f0824860d97ecf79797c1027c675da2598e227e060bc101393d7a5e608436d505b5380c49867a51f213f4d0987817110e8b1b06c4a3145421eab20a36d57981ca1f2a9226892a41f225066f535ae6d0842fe810043be3adb530b259a412059732a8e9fba4b99604e55b8adaa6c6e66d943cfd54205f9773136118d32225f391ad292435c31853ec2732ae27766e3f6c812d5d55d40544ff029b00d75ea4dde4945fd20c93ff590d57b0c644981762d06dcda454b6159ba7a1e5953dd42339bf06456fb2ecbb3c95498d7311b69429d5c13dc923f235d054e02d1b99eb54e5d4cd8337d309e18490cc2e020d200d525d345244731d1b1511f44f02ab8b18d0ac32c165e37f86e3294d121b881370f787545e0bdd71750f38f453c907dcb12fd17dc44730ca80024462fde22a9e72f362ae76246053591fe489e8f3f2c2de439c3758c893b4fd61d205765983c12187c4250574b7d29b4b2bc0c293a926b99dd8a749a677f9fd889aab0688a03869a4e98c56e3c2dbc09f3d5d5f3cc9f01cc1f0c98b7de28af773b8d41b62d0d9b4f439971f2b0bf6dd31455276c3f92efb1fad01290fd3a855d40c5cdb0842030cd27f2537e1a282896684c964f32d48a42592bf195f18610e2f8e65124aaa0e0fd800b1de6f6af7ababdbe3e97d4b1a5f013e02a1bea0164326782d44909711154d3d28fddfaef3eff08b3e8a19ac30b8c3456cc42934c66c4ab51017c6d56b518dfa1fd65374e3f300d2dea0c11e1940c37a6c07825f872a167245464d0db0f164d99ea0912229748bdfe7be8bda5bf2c4d0069571efc8a832736feed5799d758c7fa416a4f7876b83a268ed01df2b253130fffb1e697ba9aa8e1440bd5df0be36b1fd9f8bfd4f001589312f77ac2a699b8c8de75c980e1b7016bd4b2b412f6b1ceda8115c959dc19332527e82a3d4d29c67c20031af6180cb66b4e289bca5da5562f381a4c9a79016ac4657e41daea30e9ffa27c8e74c56e88e8daa479efc3c2ba8dcb5a1b619de4231385b54920fac9912d465c441e2a70fe7722feaeaed580e7e6de227bdee2f934d3a87be31c2bd7447677eef5cd5bc5177cb29ac91f43d089d1396a4d5a14162aec1af7013c608ee0cf655af96afea96ab1028d3c91a7dc5129de1a0821b8159e1ebb1179b5a4cbdca074498c892940fb8ed3399572ae66bff0cd24b624fe67ff9377202dcb49ef8a1d2ac31e56745392fc6b09911cfa068dca5a4421a04cfceb4d5e4add806c3230914538a2f19bd2eb327e2ecb68fe6ac7914950e5265ff729c3c13da0ced85b376abdff87b9be3ecd583357cc75199be6cbfc5128136d46755e6b9d2d396a7ef4d4071793f2e465a50641b97a5cdf18dcce6b9a7dfd10458e1e34690c8e73f84c9c99f3228eebf4298d176f6ba0073fa0f061a7436d0b37a60357f7e28a7a46f3eb3478be5bba12fbcc510090b194b4f8f9cb9ac4bfe851d1ce14b294925077f06bb48188977f7f3c4ac8107c7b2f9dabae90bcb726d220543defaf9daaf5bbc3bb06a02a2e5d099adb998cfde6f4870ee9ba78d36eb775ef10bc0a60b6a92fae87b96057f851cb0909af0db5c5fc33cd571fe2a2054f3d7facd39a90329243acf38e3770a83d5de6b9cb90eac1e1634671ef1a3c3723f47f4191aad8cd168c04a2e2ddc370a150bcbe3c84d98af68ad9e8896d52186e3358134fe3608a6f702c1e86e223fef4fb0bb95c7a1f367c09493de226fa59abf1da4811ef1b736c8ccb18e0040ca7b465e5701ff2a7b55712920880f3fe8f0e352f3d3949aa118f6bca425963c7fb2a9172baca2f29865605c15e70cd90bdbd8af750f999e71a7e45af31611f1efb97d1b8081ed6cd98ab75cc86f76c4ecdb40de6be151018ed20b2ae9f1312e18244f9bb0e831b04ece44351f6e7bfe4bb51f008f1e45b63f88d8e1508702f8211b8017edc729e810a42e1f1781b862651b7e10f5318d06ab0863b25300d25a3b74d83d8ed002c3e74b58024ea3e0f8ec6dbb74d4b8f1ee77e4bff392776081cf3c5a4c94e51b5c87ffb31c3f045f7256e3891f2e68ba8d148db52c7f1b545a4f3b69380f066688ad5998fbfed4b1290db94f733d7b568cdf2b62e1a4b78cd2d691f324f9fabae6effc55ac52777679bb03dbdcf9265af506d4d089d203e3bcebe2987caf8531aaa29cffa4dcbbf8b8315afa826ea25d516f56010f34a7fb8240a4040e1de14eda109a3e52d0ff0c120841bf4d629733fddf05bfa4511b185d1e4ee9f99f128aedfacd2993f6bd4d048799d1d8cb71aafbe4b964b23b005cf891848fd3b16c1763e71844dc2f4779e1b7f61bdfb0a2931adb3167aa1336503e051adbe7adfb5052db6c621a8e7fbc7272521bfc804b3312a00389ae7902c36d370fa1c394084f25ca134988487b87138a8537160b49e721facdd8bb95909cdbde97e4d302f90c9e223867506db161378d166ca620e163ea970cfd6aa36a5af923adef955a1f4173990ce978882f900e531ba815d9dfcb618b3ab34542b832435f5fc55f44a241d80b7186fb9d10459d234512e104d1c1a0e56384b6390190623c30dd2413578a7c6ffed2df60b4ef7932127449078267595585f8ce18e21d7afda96a15d32db53c14c9da444f09cc60d99ad5743c25af57b278ea425b7a4b1907cc1ea992c03aab6b93a0946331c0284e2544c8a0786e3cf759c6158fa7e28f3c2f6ee0490395cdbfe7cb1b19d9dd23f4d6be3b60cef336371ac0d8f6c6f7688d014014e2d00c43cc10e720fc48b5fc251e68282df0ee4d1455ce1386eabd689f4ba6b2de83ad70ab34377a0fc141182e9ce3f5c1f6152e9a163ac9fa4cba116a31494fedead245f20fe6a1a8e698b819620789923c4980af5f4848df4274ce5f6f7db1ece5df58771553d3382f234f13aacccb0c8617af4f22e200ea8f4580f87de566fecee7ba1ac699d0731a1354c7a91dd93145a5d901070c751e5141267deec40a2cc846b42431a8efd92182d9e136a3ff40cd71924127c9630b587be173e0c6a054ae6fab500b02532afb4b164fffa27c05c69c2017ea7b5fd43913122f4791d8b86b839df75be23f7ff4a7dc2212cddc01167a1d7d6187305605b22a434a4db444ee93a1fef4a6c18dc4b2fe7860be2ede4c65e36a247544bfda1917315c5d41c5687599936634517d0e710000dd85d6b5c89da76e21a4ea32f9aeefd6e7d52a49b202d171cc8046ebd865988d457fef70e33fc88d602fe321733a7e7b35ec13996195c650e03801c50f0b01708cabea7e80937971252c05e980c83eb3446dce466159f80e7bb46c84998f72ea34588b432d2f6a770740b128c845aaa4c06266392f31ea4661db506e1eacda64f861900a5b7bab77d9e85f81e98ca5559fe91ef64801fe22b9ff4993d073fe431dbe96044869c22caa4575014de100254a306b4571a6738ea72b5aebe89f0b6c1097ce79bb019439557a5ba2699ddf408be92eaf5b0b23d4c1ed5d0de486407a9d3880c18d705e8196f9fd9fe7cde47756b4ad21e661cf7b65f312f594060bc1d5f00fa567eb36aa0b1e30537f99641dbbf10513a9474f272635addc693240e24b457e098182b6f749e01c91993e67b30de7873e221ebb5c95c34d6bca996d216f5c7f8aecc3a27add707a7bc4ec1d3a2797d06e261b55d05e92e1db8d45c979c2015e1d6c2aee4d47c34de5a45d386945e6f008ddce4bf9599095568c736c3dc4b0beef62c45614dd7079367263da0a7678bd3db511a6fb4ca8d5b18166e32534df54a4c4631315778d23f07227133af5406f9b4395076959bf8d6aa98cde35ede5a8f2ca92e3280409fa6159a0edc6e865a7fe976ced4d01682221af0ed5297cd4f38232e12006bca91ae461b0fc2e61bca03e59027a791e547e5f85d818b791af066c6e92ee192262912a4fe9ec4da77ca74b31816c1f676301a88217dcde1c1ca09011634f6f807b26549f2a3c7a0e2f6786403056a9bc98e203cb6c2eb8873de92bc3a9b3968c636a4385977e7241cd128e66931ba5a4b8af2b4cbf5a5f42ec6bc9b8c9908b5e7de50cff4a03b87a8883f27e3c415168a88a793b4940fc82844566c7461144fa4eb343a250f23f9bc3633a191ad9204536e8a5e2e5a98e353e6738b7a06cb5f78eb6ba78f1493f3094ff71f696a78b80d21db852033a35e04163e1a4e150c036ec18a9927bb8ec8c1e7aec723140444e04d4a41bda097df9f5de86e17f30605f09f6a2e9b8c89597200cf44f600cd7abb5989ac165ac612733081a171baace12dc32936cf0e99c8bcc1250f67fa11036479468f372f87cb8732de8485776edaab922c50f23612824f1b4648daebefcccbe92e64201b0897183fabb93aee2d5271b237da3b565b95bbfc1bfc1368bfd13cdc4eadca29e010631d0a73e8c3d3a2244d246d5574752c5505fb5dcceffc955eff113677c85df66d880ca18ff5a9c87fd5e4a845c2c99ffdde9724c1c099aba03931e68c6b73928b93f5865b33c41dec4f8b1c981ddcf40010ec36b39a32d86b2d625f8393c3329cd3ef4a78df2d863b82715834387353b1d356f168b58c844d29cf365dcdf70490581c66ad24ceabfddc482e6ba0439268faa0fef7c460fa30ec423ae59d81cc6398cad07e1e232dce80833db3494ba8ca5606962d59e543f526323dab5ed90ba8058a192f4d9b2a6ac8d303d6b8a67c8e9587c2b30e484330e541d56b80f1e4cb5836f3747ae55555e8d9cfa58262f7deca62eadce6024d73036f70727cc0097167898f8840a643b1a224182c910e631b3c4007ef614cad876861b2b04880c7e5c15c4b08e3e5ce4563252f9c2115385c797a0d477c0cc43a50a4e51ec30efec998f627e3a1c85d566c7b208d4d416aa29f806bbc7450861b0bc15dd876547bc57ff5a61963eaf884a73f1c916e4cc89b4ee477c489d80e2ca5460f2b8e936820ad2558224cf890cb02fb88317ef358e914a9ad22a28dea2b36fbc2915c43125c7e6bc7706d2b3e74fb0b4a8c2566d71820d177e1a40d0e91fe56d0f94201b39f3bc15f951bdc13fa2cde15265f935f36dcfac765512577e800ff042050db086937ad029d5de6122c8cef81c281dd7e769ec874ac7d0ef7c7cc6093f2db29ed5a2a5c96190377ab3ef589cc852e3a79fe79f19f010cfda6a23a3427a0075561b28065a4d4febd8e450ece630e70c3db9e225510ee33d03d5c9d7856640badbfb22305964e79a9996ee587f9f9698258eead8cc0b53e4a2fafc403b53bad358e2c1d653cd4f7c5b8b8224512b051622237ffc2a44d7439ed39b5f1e48fb4b8ad1a927fbd22142097caa6cef4566bb8ca93e90d8d91430d8a9aee29ce1ee74ec36577c2f896eb4be95b0a7d679f127e6e5db99f2159be7771069d65cbc1de98f3d21cb5d0cbc907067176fcf7fce8052d9ebe892e11e3fd0443da6de80a752a4e8ac815a8519db23ce85b5ab665f3a731a7e6bcd891af3f64c6bbe1ce0233f545942411bbe4cad8daf24b37235f696ea15e5870fdb9fc05226969bdbc50cbf44a8c3d03ebe905beb13649c1dc965cce8e7117fdd038e346030a9f93b14959fa543a5254db2da7a0b9db05096092fa7dc0bf98d7f79e9f8da7c9b30e6dab0251ad1eb3bdf6278b5a8ea0429931c37ddc3d05e6024b7dfd89e56dba96c28224572ad592f81f4673d646febf21a3195a78c89277896493f69514822bf5cfaca3118ff2c6bbbf5767d6635ab2e87befefda9e3b365cbe5169cdf785e93a8edc2f7e4a62e6a48d7a51759afb62699440165391b6e20495397a543dcae51156a3a32030e5d078834e1f04a8ccd9f0c69174353d11e3c51835def6518372b5b34da90d482bd15567c3d1ad86cf0812c3c676caab2b0afecc2e7a44521558c910df262f5d756c123b0076ca70d98706083e8e3af507bdd3145593161272ad9ef2ac9b5478b1dca97ea3c101ba6ca31a0e9cc6f147717bf71048e8ad392869dca832bcd0742f5819d181c245c3421a8e7e83e0127dff854dbdd5bb5185bdc1753a28f2e5bfd40321d119b3133ad08594910755d8bde55934fc74fc754247e65d9166dbe874e8b187af75bde3c0beeee9e2961b225741edd9ed5d67ff1530e035e71137bcac30201fba287964cca32dff9373e551a63116a474e05ce49fc1554d9a70b49b0883a89c9dc37dc4cf9106bd3c6e94169de22f7eb74bda23d7c868a577a627731d1079ed743af121910f169fae235e26f0a0cfeb8da49b18f9352c5d3e6dc5f34184b09d4c8a268d5c18c122cb21bb888895b821b71f1bd61e85a65620c5d4ca2168c9deb099369877e32d849f67a787122cb6ceb1dbee886f2b602b52b5fc31af8399fe324b09d7694a530d92ede373ecb44c22c88a637c65a6c6c899f865451018184dc10a79a0a5eb2f0f03a10f5baf9f86fde8d2439920565cf306535195b891217779e1eea352415d90f1b3fc4c2a008dbeaaff83346a0c6217876dfc6c64a2b821c821efd9796fe8339a84c38cd26fc45d2601133aaae2d48ef721c1303e9b2b62460ff2ed54402dcbeed18ef4f730b8a9c727e830b0752e139d58f1e28955fce3edfe92e0e7139b3b7aab23c6c82d3ab23b51f4a22a5aacd725b118ab985871ae58398e266d60083fefab3797afdf375ee90941889437631541ff038276733a97284c8080441a9c28fe1281dfb9f03ad3e8a6034cb435c9435abab5be4d9775a14a4810ee7a2e555f2487571121f7b98a2e1f4a934a63c0d697c05631613243aca2a0e34042ac7ac96905e723343dc0b64da5471bbaa6374c19297eb3edab419ba379d51615a4ef973aa96ab839e75f0db62ec3e433922eeb8c3580351890ee5f2ab07fb01022ab3a64de68c73d6ce93f60ba75bbb581230b8cc0109868268dfe7b09c204bb745a4c2964aaf9a729ff67b986135c2b478578a45e2812c6b6534f5db3cd2e2a269e60e07551d5a745e8346c3ea1c5e5478bbb9e16d2b7161f882b1f4c43d144f34caceb0712f8fd301bfa9ebd40b5efde4b5cb9b4f62bae1c818c8cd25885d5b8a13867dccea21760cf3ccdd1f91868161ecd9d146bde4407a0a9d9c37ed51735d5b29ff2aa103d494ac381cb0b089bc84d992ad1be9ea7a82c0f2f156da182831a4188a27f1f2234a9a5d86d1c52283eec81a519246714b2948ccb117a3fc03306d90c3a2c84ec3635491a8e45fa6adf3f4872aef739a09be5ae9cfe2f380da846e667406452bf7ae3437944d005e04456598d1e85afc599e311ba85705e729601f3dabeb61e2ddd6e7427db367f408d4fc98385c761fb0871eaf29e090098c5a18dcfd35a8805d2308cd5528631050138da08c98551adcccc562be304be50bac2e6be5e3e9407e748be2022c015957095a772a65c042fddb91d55b41bfa07ae59a87c5b5236935c225b03d50095b7ae76465fc38344f5027a4c22950b86457830831ec28bcf9f121f43a55875854faf4d3bde202ac7f036b28a9afd2d8feeba5773ca364aba9749ffad617493107f92f8915ee27940e1bf6ca3147b1d37a5e9975f2caa3a94b60e7addd8e89b13a71a8699129e3c1788ce708de9fe09fd47eb08bd82c313a6b93baa805ca60e58e9b401c55f346a6facccbc7463487450a633be9421e268096b518061c183ac46ee19406a36987e8d8dcfe58d71504738ebc755010191c262bc2ccdd74ce92786edf8c0aa773e55f2d760e4b1b61acda638c93f3e8644ddbffd6119200adbf0e8590cb5abcfe59fd5795f29d36e5bfe8be869a87be8ae1291efae10801ebbd1d94917c6018ee4894a8dfe9ff0ad27a0658b90bf33ed8da15f12749dce6334968111d1e92e13fa1796311d4f6d6c48a41c664353ba2bef65c817bf93a279b5f1a519d43dd8c8f5d138acb5d90f6d9d5497216696bf9ee72072f906961c4ad2a0b62f2bee7888ef645ee110f9f590ed64fb8c34b6946ad2645837f33e93787ff2a96c43f13934c6610e95dc76a0d805e6b66de7d97854a62edfa376025263ccf14ecb93d1110847f9a0d79f837690f679b665281b4c496a97fc3bd32aa60124cbbb585d799a1c13574a0cbad49ad6f7c55f149514ccd00e2663cf8e6806d9e772a2d37677fc08a5da0394cb584ee9a52a65370a4dc3281907b0e02233e8605a30ab4d3b1aa2dc231e7bf93b2d138d83875b813152591588e323a4d6b0f06c676adaaa7a68ee346bb069f95117e5d149ba54b9d53c812f038f7fe4a685b040078a64eb1da1466eced9bf05c10b773c3170f48c28130df14a4536ce712f49c8ef7c927d99a86069c52ee34a944274dbcd615ebed818d0ad32a64a351470edc9111d83c1beb072edf675830981a73f3d4fd3f6788aaffbee62235a0ef5f96b1cc740ecc654324d07d158a1b9a1dfd2dc0d0375571c4e41bee8c4bdaeb4873d5758dc5ed68dd9efc1aadd1cf0792c8e9555558a83fa5023220c1d0899688bb3b66518e24da90cac1106454f20eac79724505912d2de80bb0231ab593c19c623b4c06bdb466c3929233700aef6e0de460a4da9f3d715f016412aee21cb5f3ecd76a6220f7ea906c8f598d790271a4a56fe34aeb730453b94727b2d1acd0e538113bfd33eda8c505e20dc3a54ce413d6244e0c4d6ff09c24e5e756b26caefa0cfd149c426d763c3e625520b5e2ece184b72dc00c3bd513ce9f24907478c1259886d6d0f514741fc49397872675f446c91d46f2a4e8ad9536cd5468c3f06a13af29aeb7cf14290725eac35a9937df29c7a9659ba41d8fd0d2698b3db71a53b229a927b1c1da333146eeea0a91f40c1e54234e85202b406a371af4241b9e68d688c4a3c21f12d67b05773cacdd14d047cc67cdfc56a475ae52426cdd994edd72058329adec7a01b9ada80039bf3ca6d65d0c4895c7a54af537747b466f5fec064635ae7c90a739362d817dd0428493ca425d7054abed9c7dd01580f033f84121f8ec9e9a7595e1d5c4162705a73466f9e35b7e81da27f0316d1f0ea64f5048e623d14f2153d28d91e0850f90f87206f1105a41132b3da8191b1342f1786438b569ced7ac2c14ac3f0061122c7ab1d56c966b30964deaac7a85b2effe47fb5c064b310b8ec2868a94a87b8bfe04f5436df0d4352f6779ddd8aa7c3c56b1284854e1c23914f83b6519e97ff87c1dd817d3b794c5d53781df455d9e7a600e59d82e32ff73189d449bfc4f300fab8471795d0bdc491f84ecb0a508cf2bc01f1653ae9c19b46a79df4046c951e5472ea92c5c4dfafc9830485a948c2537ac9ba7990a0bf84e33d10b5048aa8e95f658792e7fbc397667f58722bc7e278d768b9b1f37845028e075963155a255db355c9f55dbf88e6f1145ebb637776a59a00e31c1226cd619a987d1252cfb7c70bfce9331e14237d7f4c74b44ec3a2433984edd8b222a294620b946c4ad998fd1ff0fec33d49cdf14473d11107b5038c809c6cb4d4a86dcb3b7bc332b6b2e81a53dbc0a56f3c537d9b95d67376e149c2a9dd2f2fcf9e4c7ba178d91afbec8bd4980e2be1a0fb1cc9a96822c25d1f1827e7b5f24c53335e573e3fd60c5f31a3a88f1f7ef418df4d384d991f54d41d1c6ce8ab108b26dc84e367eb3bc233e1725ef1b314668cec227f6c5844496fd2ef211b81a15bb89a3017d0cc3582a9ca703db0f047493a45be4ad6c3b11624e1ca63b3005c97d7a5663c64d5fa972af735100420f16fcdc63c8b7c286ad0d7acb8634d3fe28d01a5429630bf3331535116892eb8e416cd957c37001af18fa40a6d7a834ece1120480139ef20804b186c9cb83099c3500bb684b8b00f40caf6a4d7604019365891444b56b38aaee424b508ab9a52ece9d2c09e5bbe642d3801bab2c5d9658350557c488efd8dc03ef67e3b89f3b6c96b4f669e915eedae87a940bd02e30a196b19cc1444fc943c4fdc8adcbdef4320a6ec81f85e3171ee474a6bcd1b03a50c0345b924f97c34d403f32b9e3158677a8a43e201d0273081cce183850607194760ad57f6df4f","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"63b65c6a42d31122e102442f666f73b9"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
